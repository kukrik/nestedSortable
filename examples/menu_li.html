<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keyword" content="">
    <!--<link rel="shortcut icon" href="img/favicon.png">-->
    <title>Bootstrap nestedSortable</title>
    <!-- Bootstrap core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="../assets/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300"
          rel="stylesheet" type="text/css"/>

    <!-- Custom styles for this template -->
    <link href="../assets/css/style.css" rel="stylesheet">
</head>
<body>

<!-- <strong>Warning!</strong>This will also delete the listings under that menu. This action cannot be undone. Are you sure you want to continue? -->
<!-- <strong>Well done!</strong> This menu and if any submenus are now visible. -->
<!-- <strong>Warning!</strong> Are you sure that you want to disable this menu and submenus? -->
<!-- <strong>Warning!</strong> Are you sure you want to delete this page and all content? -->
<!-- <strong>Remark!</strong> You must raise the parent's flag to another menu item! -->


<!-- BEGIN CONTENT -->
<div class="page-content-wrapper">
    <div class="page-content">

        <!-- BEGIN PAGE CONTENT-->

        <div class="row">
            <div class="col-md-12">

                <div class="content-body">
                    <div class="panel-heading">
                        <h3 class="panel-title">Menu Management</h3>

                        <div class="row">

                            <div class="panel-addmenu">
                                <div class="form-group col-md-2 center-button">
                                    <a href="#" class="btn btn-orange create" title="" role="button">
                                        <i class="fa fa-plus"></i> Add Menu Item</a>
                                </div>
                            </div>

                            <div class="panel-textarea">
                                <div class="form-group col-md-5">
                                    <input class="form-control" type="text" placeholder="Menu Text"/>
                                </div>

                                <div class="form-group col-md-7 center-button">
                                    <a href="#" class="btn btn-orange center-button" title="" role="button"> Save</a>
                                    <a href="#" class="btn btn-default center-button back" title="" role="button">
                                        Cancel</a>
                                </div>
                            </div>

                        </div>

                        <div class="row">
                            <div class="form-group col-md-6 center-button">
                                <a href="#" id="collapse-all" class="btn btn-default center-button" title=""
                                   role="button"><i class="fa fa-minus"></i> Collapse All</a>
                                <a href="#" id="expand-all" class="btn btn-default center-button" title=""
                                   role="button"><i class="fa fa-plus"></i> Expand All</a>
                            </div>
                        </div>

                    </div>

                    <!-- MENU CONTAINER BEGIN -->

                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="alert alert-success alert-dismissible" role="alert" style="display: block;">
                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                    <strong>Well done!</strong> Order have been changed and saved.
                                </div>
                            </div>
                        </div>

                        <!-- MENU BEGIN -->

                        <ul class="sortable ui-sortable">

                            <li id="c1_1" class="mjs-nestedSortable-leaf"> <!--mjs-nestedSortable-expanded-->
                                <div id="1" class="menu-row enabled"><!--disabled-->
                                    <span class="reorder"><i class="fa fa-bars"></i></span>
                                    <span class="disclose"><span></span></span>
                                    <section class="menu-body">Home<span class="parent"> *</span></section>
                                    <section class="menu-btn-body center-button">
                                        <button title="Disable" class="btn btn-white btn-xs" data-value="103">Disable
                                        </button> <!--data-toggle="tooltip"-->
                                        <button title="Edit" class="btn btn-primary btn-xs" data-toggle="tooltip"
                                                value="103">
                                            <i class="fa fa-pencil"></i>
                                        </button>
                                        <button class="btn btn-danger btn-xs" data-toggle="tooltip" title="Delete"
                                                data-value="103">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </section>
                                </div>
                            </li>

                            <li id="c2_2" class="mjs-nestedSortable-leaf">
                                <div id="2" class="menu-row enabled"><!--disabled-->
                                    <span class="reorder"><i class="fa fa-bars"></i></span>
                                    <span class="disclose"><span></span></span>
                                    <section class="menu-body">Organisation</section>
                                    <section class="menu-btn-body center-button">
                                        <button title="Disable" class="btn btn-white btn-xs" data-value="103">Disable
                                        </button> <!--data-toggle="tooltip"-->
                                        <button title="Edit" class="btn btn-primary btn-xs" data-toggle="tooltip"
                                                value="103">
                                            <i class="fa fa-pencil"></i>
                                        </button>
                                        <button class="btn btn-danger btn-xs" data-toggle="tooltip" title="Delete"
                                                data-value="103">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </section>
                                </div>
                            </li>

                            <li id="c3_3" class="mjs-nestedSortable-leaf">
                                <div id="3" class="menu-row enabled"><!--disabled-->
                                    <span class="reorder"><i class="fa fa-bars"></i></span>

                                    <span class="disclose"><span></span></span>

                                    <section class="menu-body">Contacts</section>
                                    <section class="menu-btn-body center-button">
                                        <button title="Disable" class="btn btn-white btn-xs" data-value="103">Disable
                                        </button> <!--data-toggle="tooltip"-->
                                        <button title="Edit" class="btn btn-primary btn-xs" data-toggle="tooltip"
                                                value="103">
                                            <i class="fa fa-pencil"></i>
                                        </button>
                                        <button class="btn btn-danger btn-xs" data-toggle="tooltip" title="Delete"
                                                data-value="103">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </section>
                                </div>
                            </li>

                            <li id="c4_4" class="mjs-nestedSortable-leaf">
                                <div id="4" class="menu-row enabled"><!--disabled-->
                                    <span class="reorder"><i class="fa fa-bars"></i></span>
                                    <span class="disclose"><span></span></span>
                                    <section class="menu-body">Board</section>
                                    <section class="menu-btn-body center-button">
                                        <button title="Disable" class="btn btn-white btn-xs" data-value="103">Disable
                                        </button> <!--data-toggle="tooltip"-->
                                        <button title="Edit" class="btn btn-primary btn-xs" data-toggle="tooltip"
                                                value="103">
                                            <i class="fa fa-pencil"></i>
                                        </button>
                                        <button class="btn btn-danger btn-xs" data-toggle="tooltip" title="Delete"
                                                data-value="103">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </section>
                                </div>
                            </li>

                            <li id="c5_5" class="mjs-nestedSortable-leaf">
                                <div id="5" class="menu-row enabled"><!--disabled-->
                                    <span class="reorder"><i class="fa fa-bars"></i></span>

                                    <span class="disclose"><span></span></span>

                                    <section class="menu-body">Statutes</section>
                                    <section class="menu-btn-body center-button">
                                        <button title="Disable" class="btn btn-white btn-xs" data-value="103">Disable
                                        </button> <!--data-toggle="tooltip"-->
                                        <button title="Edit" class="btn btn-primary btn-xs" data-toggle="tooltip"
                                                value="103">
                                            <i class="fa fa-pencil"></i>
                                        </button>
                                        <button class="btn btn-danger btn-xs" data-toggle="tooltip" title="Delete"
                                                data-value="103">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </section>
                                </div>
                            </li>

                            <li id="c6_6" class="mjs-nestedSortable-leaf">
                                <div id="6" class="menu-row enabled"><!--disabled-->
                                    <span class="reorder"><i class="fa fa-bars"></i></span>

                                    <span class="disclose"><span></span></span>

                                    <section class="menu-body">Reporting</section>
                                    <section class="menu-btn-body center-button">
                                        <button title="Disable" class="btn btn-white btn-xs" data-value="103">Disable
                                        </button> <!--data-toggle="tooltip"-->
                                        <button title="Edit" class="btn btn-primary btn-xs" data-toggle="tooltip"
                                                value="103">
                                            <i class="fa fa-pencil"></i>
                                        </button>
                                        <button class="btn btn-danger btn-xs" data-toggle="tooltip" title="Delete"
                                                data-value="103">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </section>
                                </div>
                            </li>

                            <li id="c7_7" class="mjs-nestedSortable-leaf">
                                <div id="7" class="menu-row enabled"><!--disabled-->
                                    <span class="reorder"><i class="fa fa-bars"></i></span>

                                    <span class="disclose"><span></span></span>

                                    <section class="menu-body">Projects</section>
                                    <section class="menu-btn-body center-button">
                                        <button title="Disable" class="btn btn-white btn-xs" data-value="103">Disable
                                        </button> <!--data-toggle="tooltip"-->
                                        <button title="Edit" class="btn btn-primary btn-xs" data-toggle="tooltip"
                                                value="103">
                                            <i class="fa fa-pencil"></i>
                                        </button>
                                        <button class="btn btn-danger btn-xs" data-toggle="tooltip" title="Delete"
                                                data-value="103">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </section>
                                </div>
                            </li>

                            <li id="c8_8" class="mjs-nestedSortable-leaf">
                                <div id="8" class="menu-row disabled"><!--enabled-->
                                    <span class="reorder"><i class="fa fa-bars"></i></span>

                                    <span class="disclose"><span></span></span>

                                    <section class="menu-body">I write a long text, let's see how the text is broken or
                                        not and how the divide looks...
                                    </section>
                                    <section class="menu-btn-body center-button">
                                        <button title="Enable" class="btn btn-success btn-xs" data-value="103">Enable
                                        </button> <!--data-toggle="tooltip"-->
                                        <button title="Edit" class="btn btn-primary btn-xs" data-toggle="tooltip"
                                                value="103">
                                            <i class="fa fa-pencil"></i>
                                        </button>
                                        <button class="btn btn-danger btn-xs" data-toggle="tooltip" title="Delete"
                                                data-value="103">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </section>
                                </div>
                            </li>
                        </ul>

                        <!-- MENU END -->
                    </div>

                    <!-- MENU CONTAINER BEGIN -->
                </div>
            </div>
        </div>

        <h3>Try the custom methods:</h3>

        <p><br>
            <input id="serialize" name="serialize" type="submit" value=
                    "Serialize"></p>
        <pre id="serializeOutput">
		</pre>

        <p><input id="toArray" name="toArray" type="submit" value=
                "To array"></p>
        <pre id="toArrayOutput">
		</pre>

        <p><input id="toHierarchy" name="toHierarchy" type="submit" value=
                "To hierarchy"></p>
        <pre id="toHierarchyOutput">
		</pre>
        <!-- END PAGE CONTENT-->
    </div>
</div>
<!-- BEGIN CONTENT -->

<!-- js placed at the end of the document so the pages load faster -->
<script type="text/javascript" src="/qcubed-4/vendor/qcubed/application/assets/js/jquery3.js"></script>
<script type="text/javascript" src="/qcubed-4/vendor/qcubed/application/assets/js/jquery-ui.js"></script>
<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="../assets/js/jquery.mjs.nestedSortable.js"></script>


<!--common script for all pages-->
<script>
    $().ready(function () {
        /*var ns = */
        $('ul.sortable').nestedSortable({
            forcePlaceholderSize: true, //
            handle: 'div', //
            helper: 'clone', //
            listType: 'ul',
            items: 'li', //
            opacity: .6, //
            placeholder: 'placeholder', //
            revert: 250, //
            tabSize: 25,
            tolerance: 'pointer', //
            toleranceElement: '> div',
            maxLevels: 3,
            isTree: true,
            expandOnHover: 700,
            startCollapsed: false

            //change: function(){
            //console.log('Relocated item');
            //}
        });

        $('.disclose').on("click", function () {
            $(this).closest("li").toggleClass("mjs-nestedSortable-expanded").toggleClass("mjs-nestedSortable-collapsed");
        });

        $("#collapse-all").on('click', function () {
            $('ul.sortable').find('li.mjs-nestedSortable-expanded').removeClass('mjs-nestedSortable-expanded').addClass('mjs-nestedSortable-collapsed');
        });

        $("#expand-all").on('click', function () {
            $('ul.sortable').find('li.mjs-nestedSortable-collapsed').removeClass('mjs-nestedSortable-collapsed').addClass('mjs-nestedSortable-expanded');
        });

        $('.create').on('click', function () {
            $('.panel-addmenu').hide();
            $('.panel-textarea').show();
        });

        $('.back').on('click', function () {
            $('.panel-textarea').hide();
            $('.panel-addmenu').show();
        });

        $('[data-toggle="tooltip"]').tooltip();


        $('#serialize').click(function (e) {
            serialized = $('ul.sortable').nestedSortable('serialize');
            $('#serializeOutput').text(serialized + '\n\n');
        });

        $('#toHierarchy').click(function (e) {
            hiered = $('ul.sortable').nestedSortable('toHierarchy', {startDepthCount: 0});
            hiered = dump(hiered);
            (typeof($('#toHierarchyOutput')[0].textContent) != 'undefined') ?
                    $('#toHierarchyOutput')[0].textContent = hiered : $('#toHierarchyOutput')[0].innerText = hiered;
        });

        $('#toArray').click(function (e) {
            arraied = $('ul.sortable').nestedSortable('toArray', {startDepthCount: 0});
            arraied = dump(arraied);
            (typeof($('#toArrayOutput')[0].textContent) != 'undefined') ?
                    $('#toArrayOutput')[0].textContent = arraied : $('#toArrayOutput')[0].innerText = arraied;
        });
    });

    function dump(arr, level) {
        var dumped_text = "";
        if (!level) level = 0;

        //The padding given at the beginning of the line.
        var level_padding = "";
        for (var j = 0; j < level + 1; j++) level_padding += "    ";

        if (typeof(arr) == 'object') { //Array/Hashes/Objects
            for (var item in arr) {
                var value = arr[item];

                if (typeof(value) == 'object') { //If it is an array,
                    dumped_text += level_padding + "'" + item + "' ...\n";
                    dumped_text += dump(value, level + 1);
                } else {
                    dumped_text += level_padding + "'" + item + "' => \"" + value + "\"\n";
                }
            }
        } else { //Strings/Chars/Numbers etc.
            dumped_text = "===>" + arr + "<===(" + typeof(arr) + ")";
        }
        return dumped_text;
    }
</script>


</body>
</html>